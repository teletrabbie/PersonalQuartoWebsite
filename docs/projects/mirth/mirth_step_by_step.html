<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Christian Franke">
<meta name="dcterms.date" content="2024-09-10">

<title>CF - Install Mirth Connect (Step-by-step)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../pictures/foil_kreis.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../quarto.html"> 
<span class="menu-text">Quarto-Projekte</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../old.html"> 
<span class="menu-text">Frühere Projekte</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../poster.html"> 
<span class="menu-text">Poster</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Über mich</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Install Mirth Connect (Step-by-step)</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Christian Franke </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 10, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>In einem Projekt im 7. Semester arbeiten wir mit dem Kommunikationsserver Mirth Connect. Diese Anleitung zeigt einen möglichen Installationsprozess für Linux in einer VM.</p>
<section id="voraussetzungen" class="level2">
<h2 class="anchored" data-anchor-id="voraussetzungen">Voraussetzungen</h2>
<p>Der Kommunikationsserver “Mirth® Connect by NextGen Healthcare” (kurz: Mirth) kann unter Linux, Windows oder iOS betrieben werden. Die <a href="https://docs.nextgen.com/bundle/Mirth_User_Guide_4_5_0/page/connect/connect/topics/c_Getting_Started_mirth_connect_ug.html" target="_blank">offizielle Dokumentation von NextGen Healthcare</a> zeigt den Installationsprozess mit Hilfe eines GUI oder CLI Installers.</p>
<p>In unserem späteren Projekt-Use-Case wird höchst wahrscheinlich Linux zum Einsatz kommen, sodass zunächst ein Linux System benötigt wird. Wir arbeiten hier mit einer virtuellen Maschine mit <a href="https://www.debian.org" target="_blank">Debian</a>. Für die virtuelle Maschine wird <a href="https://www.virtualbox.org" target="_blank">Virtual Box von Oracle</a> verwendet. An dieser Stelle soll weder die Installation von Virtual Box noch von Linux in einer VM gezeigt werden. Dafür gibt es bereits diverse <a href="https://www.howtogeek.com/796988/how-to-install-linux-in-virtualbox/" target="_blank">Ressourcen im Internet</a>.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Wichtig: Netzwerkbrücke">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Wichtig: Netzwerkbrücke
</div>
</div>
<div class="callout-body-container callout-body">
<p>Um später auf Mirth und die VM zugreifen zu können, sollte bei (oder nach) dem Erstellen der VM die Netzwerkbrücke unter dem Netzwerkadaptern ausgewählt werden.</p>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="VM Netzwerk.png" class="img-fluid figure-img"></p>
<figcaption>Netzwerkbrücke</figcaption>
</figure>
</div>
<p>Optional sollte das Linux System SSH unterstützen oder beim Installationsprozess sollte SSH ebenfalls installiert werden. Eine Anleitung für SSH findet man <a href="https://linuxgenie.net/how-to-configure-and-enable-ssh-on-debian-12/" target="_blank">beispielweise hier</a>. Mit SSH kann man von einem anderen Rechner direkt auf dem Linux System arbeiten (per Kommandozeile). Es kann dafür einfacher sein, am Rechner mit Internetbowser zu arbeiten und (z.B. für MS Windows) via PowerShell auf das Linux System zuzugreifen. Das spart durchaus Arbeit zum “Abtippen” von URLs oder Code, den man stattdessen einfach Copy&amp;Paste vom Internet Brwoser ins Terminal kopieren kann.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Install SSH.png" class="img-fluid figure-img"></p>
<figcaption>SSH installieren</figcaption>
</figure>
</div>
<div class="sourceCode" id="cb1"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>sudo apt install openssh-server</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Anstatt einer Linux VM könnten Windows-User alternativ <a href="https://learn.microsoft.com/en-us/windows/wsl/install" target="_blank">WSL</a> (Windows Subsystem for Linux) nutzen. Wenn Debian / Linux installiert wurde, können wir uns um die Installation von Mirth kümmern.</p>
</section>
<section id="gleicht-geht-es-los" class="level2">
<h2 class="anchored" data-anchor-id="gleicht-geht-es-los">Gleicht geht es los</h2>
<p>Startet das Linux System und öffnet das Terminal. Alternativ kann man sich via SSH in die Linux VM über den normalen Rechner einloggen. In meinem Beispiel habe ich mich mit MS Windows PowerShell auf Debian eingeloggt.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>ssh mirth@debian</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ssh login success.png" class="img-fluid figure-img"></p>
<figcaption>Mit Windows PowerShell und SSH auf Debian einloggen</figcaption>
</figure>
</div>
<p>Zunächst sollte das Linux System aktualisiert werden. Beim ersten Update muss man möglicherweise den eigenen User als Sudouser hinterlegn.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>su</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>[enter root password]</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>sudo usermod -aG sudo [username]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Die <a href="https://itslinuxfoss.com/add-user-sudoers-debian-12/" target="_blank">ausführliche Anleitung</a> zeigt mehrere Varianten, um den User als Sudouser zu definieren.</p>
<p>Danach wird die Systemaktualisierung durchgeführt.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>sudo apt update</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>sudo apt upgrade</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Das Systemupdate findet man in vielen Anleitungen und scheint sinnvoll, aber nicht zwingend nötig zu sein.</p>
</section>
<section id="mirth-herunterladen" class="level2">
<h2 class="anchored" data-anchor-id="mirth-herunterladen">Mirth herunterladen</h2>
<p>Die Installation soll hier möglichst nur im Terminal erfolgen. Für den Download kann <a href="https://www.zdnet.com/article/3-linux-commands-i-use-for-downloading-files-and-how-theyre-different/" target="_blank">unter anderem</a> <em>wget</em> genutzt werden. Das Programm muss möglicherweise zunächst noch intstalliert werden.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>sudo apt-get install wget</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Danach wird die neuste *tar.gz Datei heruntergeladen und als mirthconnect.tar.gz im eigenen Home-Ordner gespeichert. Man kann den Download natürlich auch in einen anderen Ordner herunterladen.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>wget -O mirthconnect.tar.gz https://s3.amazonaws.com/downloads.mirthcorp.com/connect/4.5.1.b332/mirthconnect-4.5.1.b332-unix.tar.gz</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Der Download startet, zeigt einen Fortschrittsbalken an und bestätigt den (hoffentlich) erfolgreichen Abschluss. Optional kann man manuell nachschauen, ob die Datei tatsächlich im Home-Verzeichnis angekommen ist.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>ls</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="download mirth with wget.png" class="img-fluid figure-img"></p>
<figcaption>Download von Mirth und Kontrolle</figcaption>
</figure>
</div>
<p>Damit ist der erste Schritt erledigt und die Installation von Mirth und Java kann folgen.</p>
</section>
<section id="mirth-und-java-installieren" class="level2">
<h2 class="anchored" data-anchor-id="mirth-und-java-installieren">Mirth und Java installieren</h2>
<p>Mirth benötigt Java, sodass dies zunächst installiert werden muss. Wie üblich, gibt es dafür <a href="https://www.digitalocean.com/community/tutorials/how-to-install-java-with-apt-on-debian-11" target="_blank">mehrere Varianten</a>, aber letztlich werden nur zwei Befehle benötigt.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>sudo apt install default-jre</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>sudo apt install default-jdk</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Der Mirth-Download wird einfach entpackt, sodass ein weiterer Ordner Namens “Mirth Connect” erstellt wird. Dieser enthält bereit alle relevanten Dateien, die der Kommunikationsserver benötigt.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>tar xf mirthconnect.tar.gz</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>cd Mirth\ Connect/</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>ls</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Mirth muss nur noch gestartet werden.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>./mcservice start</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="starting mcservice.png" class="img-fluid figure-img"></p>
<figcaption>Starten des Mirth Connect Service</figcaption>
</figure>
</div>
<p>Der Status des Mirth Connect Service lässt sich einfach anzeigen.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>./mcservice status</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="status.png" class="img-fluid figure-img"></p>
<figcaption>Status des Mirth Connect Service</figcaption>
</figure>
</div>
<p>Innerhalb des gleichen Netzwerkes kann nun mittels eines Webbrowsers auf Mirth zugegriffen werden. Eurer lokaler Rechner muss ebenfalls Java installiert haben. Die IP-Adresse des Linux Systems lässt sich leicht herausfinden.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>ip a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ip.png" class="img-fluid figure-img"></p>
<figcaption>Wo man die IP-Adresse findet</figcaption>
</figure>
</div>
<p>Die IP-Adresse wird zusammen mit dem Port 8080 (mit Doppelpunkt voneinander getrennt), in die Browser-Adresszeile eingegeben. Der Mirth Startbildschirm wird gezeigt und man kann den Mirth Connect Administrator starten.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="browser.png" class="img-fluid figure-img"></p>
<figcaption>Browseransicht</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Wirewall">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Wirewall
</div>
</div>
<div class="callout-body-container callout-body">
<p>Falls noch eine Firewall (ufw: Ubuntu Firewall) aktiv ist, muss der entsprechende Port möglicherwiese geöffnet werden. Man kann beispielweise Port 8080 <a href="https://www.configserverfirewall.com/ufw-ubuntu-firewall/ubuntu-firewall-open-port/" target="_blank">öffnen</a> mit dem Befehl <code>sudo ufw allow 8080</code>.</p>
</div>
</div>
<p>Der Weblaucher wird im Browser heruntergelden, installiert und gestartet. Gegebenfalls muss man die Installation auf dem lokalen Rechner bestätigen, wie man es von anderen Applikationen gewohnt ist. Je nach Netzwerk muss der Port 8843 noch freigegeben werden <code>sudo ufw allow 8443</code>.</p>
<p>Das Login-Fenster öffnet sich mit der bereits hinterlegten Serverdaten. Mit <code>admin</code> als Username und <code>admin</code> als Passwort kann man sich initial einloggen in Mirth Connect Administrator.</p>
<p><img src="admin login.png" class="img-fluid" style="border:1px solid black"></p>
<p>Die persönlichen Daten sowie ein neues Passwort wird im nächsten Schritt einmalig eingegeben. Danach ist Mirth Connect fertig installiert und bereit für mehr.</p>
<p><img src="initial login.png" class="img-fluid" style="border:1px solid black"></p>
<div class="callout callout-style-default callout-tip callout-titled" title="Praktischer Hinweis">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Praktischer Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Es könnte sinnvoll sein, den <code>Mirth Connect</code> Ordner umzubenennen, weil Leerzeichen evtl. gewisse spätere Aspekte verkomplizieren. Im Terminal mit dem Befehl <code>mv Mirth\ Connect/ mirthconnect</code> ist die neue Ordnerbezeichnung leicht umgesetzt.</p>
</div>
</div>
</section>
<section id="referenzen" class="level2">
<h2 class="anchored" data-anchor-id="referenzen">Referenzen</h2>
<p>Viele weitere Informationen über Mirth findet man in der <a href="https://docs.nextgen.com/bundle/Mirth_User_Guide_4_5_0/page/connect/connect/topics/c_intro_mirth_connect_ug.html" target="_blank">offiziellen Dokumentation von NextGen Healthcare</a> oder vielen weiteren Seiten / Foren sowie <a href="https://www.youtube.com/watch?v=hcb5GQa-SL0" target="_blank">Video-Tutorials</a>.</p>
</section>
<section id="alternativen" class="level2">
<h2 class="anchored" data-anchor-id="alternativen">Alternativen</h2>
<p>Alternativ zu einer Linux Installation kann man Mirth connect auch in einem Docker-Container betreiben. Wie das funktioniert, wird im <a href="https://forums.mirthproject.io/articles/175025-using-connect-with-docker" target="_blank">Mirth Project Forum</a> gezeigt. Zudem lässt sich auf PostgreSQL und PG-Admin in einem <a href="https://medium.com/@marvinjungre/get-postgresql-and-pgadmin-4-up-and-running-with-docker-4a8d81048aea" target="_blank">Container betreiben</a>. Wenn Ihr noch keine Erfahrung mit Docker habt, so gibt es viele <a href="https://www.youtube.com/watch?v=pg19Z8LL06w" target="_blank">Tutorials</a> zu diesem Thema.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Created in 2025</p>
</div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/teletrabbie">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://open.spotify.com/playlist/5uOdtjw9CCVf5dfX6kLa9y?si=9b11daf398e84c66">
      <i class="bi bi-spotify" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://flyingangels.ch/">
      <i class="bi bi-person-arms-up" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://quarto.org/docs/websites/">
<p>Made with Quarto</p>
</a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>